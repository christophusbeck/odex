{% extends 'layout.html' %}

{% block content %}
    <div class="configuration">
        <h1 align="center">New Run:</h1>
        <br>
        Run title: {{ exp.0.run_name }}
        <br>
        Detected subspaces: {{ columns|length }}


        <table class="table table-bordered" align="center" border="1">
            <thead>
            <tr>
                <th>Subspaces on *.csv</th>
                <th>Indexing</th>
            </tr>
            </thead>
            <tbody>

            {% for column in columns %}
                <tr>
                    <td>{{ column }}</td>
                    <td>{{ forloop.counter }}</td>
                </tr>
            {% endfor %}

            <br>
        </table>
        <br>


        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <br>
            <div class="operation">

                {#            form way#}
                {#                {% for choice in form.operation_model_options %}#}
                {#                    <div class="form-group">#}
                {#                        <p>{{ choice }}</p>#}
                {#                    </div>#}
                {#                {% endfor %}#}
                <input type="radio" id="sub" name="sub" onclick="hideLogAndCombo()" value="all">
                <label>All subspaces:</label><br>
                <input type="radio" id="sub" name="sub" onclick="showExcept()" value="except">
                <label>All, except:</label><br>
                <input type="radio" id="sub" name="sub" onclick="showCombo()" value="combo">
                <label>Combination:</label>

                <div class="form-group" id="except" style="display: none">
                    <label> All subspaces, except: </label> <br>
                    <input type="text" placeholder="All subspaces, except:">
                    <span style="color: red;">{{ field.errors.0 }}</span>
                </div>

                <div class="form-group" id="combo" style="display: none">
                    <label> Combination: </label> <br>
                    <input type="text" placeholder="Combination:" >
                    <span style="color: red;">{{ field.errors.0 }}</span>
                    {#                    form way#}
                    {#                    <label>{{ form.operation.label }}: </label>#}
                    {#                    {{ form.operation }}#}
                    {#                    <span style="color: red;">{{ field.errors.0 }}</span>#}
                </div>


            </div>
            {#            form way#}
            {#                {% for choice in form.ground_truth_options %}#}
            {#                    <div class="form-group">#}
            {#                    <p>{{ choice }}</p>#}
            {#                    </div>#}
            {#                {% endfor %}#}

            <div>
                <div><h3>If use ground truth file:</h3></div>
                <input type="radio" name="gt" onclick="hideGT()"> Detection only <br>
                <input type="radio" name="gt" onclick="showGT()"> Compare with a grund truth file
                <br>

                <button id="ground_truth_file" style="display: none">
                    <label>{{ form.ground_truth.label }}: </label>
                    {{ form.ground_truth }}
                    <span style="color: red;">{{ field.errors.0 }}</span>
                </button>
            </div>


            <div>
                {#            form way#}
                {#                <div> {{ form.additional_data_option }} <h3>Run again with additional data</h3></div>#}
                <h3>Run again with additional data:<input type="checkbox" onclick="showAdd(this)"></h3>

                <button id="addtional" style="display: none">
                    <label>{{ form.generated_file.label }}: </label>
                    {{ form.generated_file }}
                    <span style="color: red;">{{ field.errors.0 }}</span>
                </button>
                <br>
            </div>


            <br>
            Select Outlier Detection Method and input parameters:
            <label>
                <select name="odms" id="odms" onchange="test(this)">
                    {% for key in odms %}
                        <option value="{{ forloop.counter }}" > {{ key }}
                    {% endfor %}
                </select>
            </label>



            <table class="table table-bordered" align="center" border="1">
                <thead>
                <tr>
                    <th>parameters</th>
                    <th>values</th>
                </tr>
                </thead>
                <tbody id="parameters">
                {#                {% for para in form.parameter %}#}
                {#                    <td>{{ para }}</td>#}
                {#                    <td><input type="text"></td>#}
                {#                {% endfor %}#}
                </tbody>
            </table>


            <div>
                <br>
                <a href="/main/" style="margin-right: 500px">
                    <button type="button" value="cancel">Cancel</button>
                </a>

                <a href="/main/">
                    <button type="submit" value="Add run to queue">Add run to queue</button>
                </a>
            </div>
        </form>

    </div>


{% endblock %}